'use client';

import React from 'react';
import { useEffect, useState, useCallback, useRef } from 'react';
import { useTheme } from '@/context/ThemeContext';
import styles from './profile-overview.module.css';
import { useLanguage } from '@/context/LanguageContext';
import { getLastNameOrSingle, capitalize } from '@/utils/textUtils';
import { getParamatical, ParamaticalData} from '@/utils/checkers';
import { useUserData } from '@/lib/stacks/user-stack';
import { useDemandState } from '@/lib/state-stack';
import { supabaseBrowser } from '@/lib/supabase/client';
import { ComponentStateProps } from '@/hooks/use-component-state';
import Image from 'next/image';

export default function ProfileOverview({ onStateChange }: ComponentStateProps) {
  const { theme } = useTheme();
  const { t, lang, tNode } = useLanguage();
  const { userData, userData$ } = useUserData();

  useEffect(() => {
    if(userData){
      onStateChange?.('data');
    } else {
      onStateChange?.('none');
    }
  }, [userData]);

  const getInitials = (text: string): string => {
    const words = text.trim().split(' ');
    if (words.length === 1) return words[0][0].toUpperCase();
    return (words[0][0] + words[1][0]).toUpperCase();
  };

  const getRoleType = (role: string | undefined | null): string => {
    switch (role) {
      case 'Roles.celebrity':
        return t('celebrity_text');
      case 'Roles.creator':
        return t('creator_text');
      default:
        return t('unknown_role_text');
    }
  };

  const getRoleIcon = (role: string | undefined | null): React.JSX.Element => {
    switch (role) {
      case 'Roles.creator':
        return <svg fill="#FE9C36" height="1280" version="1.1" viewBox="0 0 2048 2048" width="1280"
                   xmlns="http://www.w3.org/2000/svg">
                   <path d="m0 0h27l21 2 22 4 24 7 24 10 20 11 19 13 13 11 12 11 13 14 12 16 10 16 10 18 15 29 10 19 12 23 10 19 12 23 10 19 12 23 10 19 12 23 10 19 13 25 10 19 18 34 17 33 10 19 6 10 8 2 395 67 27 6 18 6 21 9 19 10 19 13 17 14 17 17 9 11 11 15 10 17 8 15 8 20 6 18 5 24 2 13 1 12v27l-2 20-5 25-6 20-9 21-11 21-8 12-8 11-12 14-5 6h-2l-2 4-37 37-7 8-33 33-5 6-46 46-5 6h-2l-2 4-32 32-1 2h-2v2h-2l-2 4h-2l-2 4-33 33-2 3h-2l-2 4-38 38-5 6-18 18h-2l-1 3 1 16 24 164 18 124 15 102 2 16v42l-4 27-7 26-8 20-8 16-6 11-11 16-10 13-14 15-8 8-11 9-13 10-20 12-15 8-20 8-23 7-26 5-17 2h-28l-24-3-23-5-21-7-25-11-50-25-23-11-50-25-23-11-58-29-23-11-72-36-23-11-40-20h-6l-62 31-23 11-66 33-19 9-72 36-21 10-98 49-23 10-24 8-22 5-22 3h-37l-27-4-26-7-16-6-16-7-18-10-16-11-14-11-16-15-14-15-14-19-8-13-12-23-8-21-6-23-4-24-1-12v-25l4-34 12-82 10-67 11-76 12-82 12-83v-6l-7-8-12-12v-2h-2l-7-8-38-38v-2h-2l-7-8-34-34v-2h-2l-7-8-26-26v-2l-3-1-7-8-33-33v-2h-2l-7-8-40-40-7-8-38-38v-2h-2l-7-8-10-11-10-13-10-15-10-18-9-21-6-18-5-22-3-23v-35l3-24 6-26 8-23 13-27 10-16 10-14 18-21 8-7 11-10 18-13 15-9 15-8 20-8 24-7 31-6 384-65 8-3 15-29 13-25 10-19 13-25 9-16 8-16 16-31 10-19 12-23 11-20 8-16 14-27 10-19 13-25 12-22 17-33 9-15 11-16 11-14h2l2-4 16-16 14-11 14-10 21-12 17-8 27-9 23-5zm-18 481-34 3-33 5-29 6-30 8-36 12-27 11-24 11-27 14-25 15-15 10-20 14-10 8-14 11-3 2v2l-4 2-13 12-3 2v2l-4 2-28 28-7 8-12 14-13 16-13 18-7 10-10 15-13 22-12 22-13 27-8 19-10 27-8 25-8 31-7 35-4 30-3 42v38l3 40 5 37 8 38 10 35 10 29 10 24 11 24 13 25 16 27 17 25 12 16 11 14 12 14 9 10 7 8 23 23 8 7 10 9 11 9 16 13 14 10 27 18 22 13 18 10 23 11 23 10 24 9 24 8 29 8 39 8 28 4 31 3 21 1h27l36-2 34-4 34-6 29-7 27-8 31-11 26-11 29-14 22-12 21-13 18-12 18-13 14-11 11-9 12-11 16-14v-2h2v-2l4-2 4-4v-2h2v-2h2l7-8 11-12v-2h2l5-6v-2h2l20-26 12-17 13-20 13-22 12-23 8-16 12-28 10-27 9-30 8-33 6-34 4-35 1-15v-66l-3-32-4-28-6-31-5-20-8-27-9-26-12-29-16-33-15-27-14-22-14-20-9-12-13-16-9-11-4-5h-2l-2-4-13-13-2-3h-2l-2-4h-2l-2-4-8-7-9-9-11-9-13-11-17-13-17-12-15-10-20-12-16-9-27-14-28-12-24-9-27-9-31-8-22-5-24-4-37-4-15-1z"
                       transform="translate(1009,61)" />
                   <path d="m0 0h28l35 2 34 4 36 7 27 7 36 12 28 11 35 17 25 14 22 14 18 13 17 13 13 11 11 9 13 13 8 7 12 13 4 4v2h2l9 11 11 13 12 16 12 17 11 17 14 24 16 32 10 23 11 30 9 30 7 30 6 36 3 29 1 17v44l-2 30-4 31-7 36-10 37-9 26-8 20-12 27-10 19-12 21-7 11-8 12-13 19-9 11-8 10-12 14-12 13-24 24-8 7-14 12-14 11-16 12-15 10-11 7-24 14-27 14-27 12-27 10-25 8-36 9-34 6-37 4-14 1h-48l-38-3-32-5-29-6-32-9-24-8-27-11-24-11-25-13-20-12-24-16-19-14-16-13-11-10-8-7-17-16-15-16-11-12-9-11-14-18-12-17-11-17-9-15-10-18-13-26-12-29-10-28-9-31-8-38-5-36-2-25v-58l3-33 5-33 6-28 9-33 11-31 11-26 12-25 9-17 10-17 18-27 14-19 9-11 11-13 9-10 1-2h2l2-4 24-24 8-7 14-12 14-11 16-12 21-14 21-13 26-14 30-14 34-13 26-8 22-6 29-6 35-5 23-2zm96 133-44 7-149 25-66 11-28 5-10 3-8 5-3 2v2h-2l-6 9-4 10-1 13v88l2 12 6 12 5 6 11 7 6 2 7 1 85 2 1 356-64 8-28 4-10 4-10 8-6 9-3 8-1 7v103l2 10 5 10 6 7 11 7 12 3h418l9-2 11-6 8-8 6-12 1-5v-110l-3-10-7-11-7-6-10-5-8-2-80-10h-6l-1-546-4-12-6-8-9-8-9-4-5-1z" fill="#FB8408"
                       transform="translate(1008,581)" />
                   <path d="m0 0h3v575l15 1 81 10 26 4v96l-1 1-405 1-4-2v-95l4-2 113-14h5v-433l-3 1-119-2-1-13v-78l1-2 70-12 143-24 67-11z" fill="#00000"
                       transform="translate(1108,753)" />
               </svg>;
      case 'Roles.celebrity':
        return <svg height="1280" version="1.1" viewBox="0 0 2048 2048" width="1280"
                   xmlns="http://www.w3.org/2000/svg">
                   <path d="m0 0h27l21 2 22 4 24 7 24 10 20 11 19 13 13 11 12 11 13 14 12 16 10 16 10 18 15 29 10 19 12 23 10 19 12 23 10 19 12 23 10 19 12 23 10 19 13 25 10 19 12 22 8 16 15 29 10 19 6 10 8 2 395 67 27 6 18 6 21 9 19 10 19 13 17 14 17 17 9 11 11 15 10 17 8 15 8 20 6 18 5 24 2 13 1 12v27l-2 20-5 25-6 20-9 21-11 21-8 12-8 11-13 15-4 5h-2l-2 4-37 37-7 8-33 33-5 6-46 46-5 6h-2l-2 4-32 32-1 2h-2v2h-2l-2 4h-2l-2 4-34 34-7 8-36 36-5 6-21 21 1 16 24 164 18 124 15 102 2 16v42l-4 27-7 26-8 20-8 16-6 11-11 16-10 13-14 15-8 8-11 9-13 10-20 12-15 8-20 8-23 7-26 5-17 2h-28l-24-3-23-5-21-7-25-11-50-25-23-11-50-25-23-11-58-29-23-11-70-35-23-11-42-21h-6l-62 31-23 11-66 33-19 9-72 36-21 10-98 49-23 10-24 8-22 5-22 3h-37l-27-4-26-7-16-6-16-7-18-10-16-11-14-11-16-15-14-15-14-19-8-13-12-23-8-21-6-23-4-24-1-12v-25l4-34 12-82 10-67 11-76 12-82 12-83v-7l-19-19v-2h-2l-7-8-41-41-7-8-33-33v-2h-2l-7-8-26-26v-2l-3-1-7-8-33-33v-2l-4-2v-2h-2l-7-8-36-36-7-8-38-38v-2h-2l-7-8-11-12-14-19-9-15-8-15-8-20-6-19-5-24-2-17v-35l3-24 6-26 8-23 13-27 10-16 10-14 18-21 8-7 11-10 18-13 15-9 15-8 20-8 24-7 31-6 384-65 8-3 15-29 13-25 10-19 13-25 9-16 8-16 16-31 10-19 12-23 11-20 8-16 14-27 10-19 13-25 12-22 17-33 9-15 11-16 11-14h2l2-4 16-16 14-11 14-10 21-12 17-8 27-9 23-5zm-18 481-34 3-33 5-29 6-30 8-36 12-27 11-24 11-27 14-25 15-15 10-20 14-10 8-14 11-3 2v2l-4 2-13 12-3 2v2l-4 2-28 28-7 8-12 14-13 16-13 18-7 10-10 15-9 15-9 16-12 23-12 26-13 34-9 28-8 31-6 29-4 26-3 34-1 18v38l3 40 5 37 8 38 10 35 10 29 10 24 11 24 13 25 16 27 15 22 13 18 13 16 9 11 11 12 7 8 23 23 8 7 10 9 11 9 16 13 14 10 27 18 22 13 18 10 23 11 20 9 24 9 33 11 36 9 38 7 34 4 34 2h27l36-2 34-4 34-6 29-7 27-8 31-11 26-11 29-14 22-12 21-13 18-12 14-10 18-14 11-9 12-11 16-14v-2h2v-2l4-2 4-4v-2h2l7-8 7-7 6-7v-2h2l5-6v-2h2l20-26 12-17 13-20 13-22 12-23 8-16 12-28 10-27 9-30 7-28 6-32 4-31 2-25v-67l-3-32-4-29-7-34-7-27-12-36-8-21-13-29-11-22-13-23-14-22-14-20-13-17-13-16-18-20-8-8-2-3h-2l-2-4h-2l-2-4-8-7-9-9-11-9-13-11-17-13-17-12-15-10-20-12-16-9-25-13-30-13-24-9-27-9-31-8-22-5-24-4-37-4-15-1z" fill="#BCBCBC"
                       transform="translate(1009,61)" />
                   <path d="m0 0h29l35 2 34 4 36 7 27 7 37 12 29 12 33 16 25 14 22 14 18 13 17 13 13 11 11 9 13 13 8 7 12 13 11 12 9 11 13 16 10 14 18 27 14 24 16 32 10 23 11 30 9 30 7 30 6 36 3 29 1 17v44l-2 30-4 31-7 36-10 37-9 26-8 20-12 27-10 19-12 21-7 11-8 12-13 19-9 11-8 10-12 14-12 13-24 24-8 7-14 12-14 11-15 11-13 9-14 9-24 14-27 14-27 12-27 10-25 8-36 9-34 6-37 4-14 1h-48l-38-3-32-5-29-6-32-9-24-8-27-11-24-11-23-12-27-16-19-13-19-14-10-8-11-9-31-29-15-16-11-12-9-11-14-18-12-17-11-17-12-20-14-27-10-21-11-28-11-33-8-31-6-32-4-29-2-25v-58l3-33 5-33 8-36 9-31 9-25 11-26 12-25 9-17 10-17 14-21 12-17 10-13 11-13 9-11 6-7h2l2-4 24-24 8-7 14-12 14-11 16-12 21-14 21-13 26-14 23-11 30-12 33-11 26-7 29-6 35-5 23-2zm-12 132-30 3-26 5-22 6-20 7-25 12-16 9-16 11-10 8-13 11-17 17-9 11-11 15-10 16-10 19-8 20-5 16-4 15-3 14-3 29v28l3 13 7 11 9 8 9 4 12 2h165l10-2 12-6 9-9 5-11 2-10 1-18 3-17 5-13 5-8 5-4 6-2 16-1 12 3 5 5 5 8 3 10 1 7v12l-3 16-6 16-9 17-10 15-13 18-22 26-9 11-11 11-7 8-13 13v2h-2l-7 8-12 12-7 8-10 10v2h-2l-7 8-10 10v2h-2l-7 8-10 10v2h-2l-7 8-14 14-7 8-10 10-7 8-13 13-7 8-9 9v2h-2l-7 8-14 14-7 8-8 9-6 11-1 5v121l3 10 6 9 9 8 12 5 6 1 131 1h265l94-1 11-3 8-4 9-8 6-10 2-9v-198l-4-11-7-9-10-7-9-3-34-1-97 1 7-9 12-13 7-8 14-15 12-14 9-11 12-14 14-18 13-18 11-18 12-22 10-24 6-20 4-19 2-16 1-15v-29l-2-21-5-28-9-29-9-20-11-20-12-17-12-14-18-18-17-13-17-11-22-12-25-10-19-6-26-6-27-4-26-2z"
                       fill="#7F7F7F"
                       transform="translate(1007,581)" />
                   <path d="m0 0 28 1 27 3 26 5 21 6 24 10 14 7 13 8 14 10 15 13 9 9 11 14 7 10 7 11 10 22 6 19 5 25 2 17v33l-3 24-5 21-5 15-11 24-13 22-9 13-10 13-8 10-11 13-9 11-10 11-1 2h-2l-2 4-24 26-11 12-5 6h-2l-2 4-12 12-7 8-12 12-7 8-12 12-7 8-8 8-1 2h-2l-2 4-12 12-7 8-14 14-6 7 6 1h128l5-36 2-18 1-2h124l1 1 1 135v46l-3 2h-479l-2-2v-104l3-5h2v-2h2l2-4 12-12 7-8 8-8 7-8 14-14 7-8 10-10 7-8 15-15 7-8 9-9 1-2h2l2-4 12-12 7-8 10-10 7-8 16-16 7-8 8-8 1-2h2v-2h2l2-4 11-11 7-8 9-9 7-8 9-10 9-11 14-18 20-30 12-23 8-24 3-17v-21l-3-18-6-16-9-14-8-8-10-6-13-5-16-2h-9l-16 2-10 3-13 7-9 8-7 10-7 14-6 19-3 27-1 10-1 1h-162l-1-2v-18l3-28 5-23 7-21 9-20 10-17 10-14 11-13 9-10 10-9 19-14 11-7 18-10 19-8 18-6 26-6 32-4z" fill="#00000"
                       transform="translate(1016,752)" />
                   <path d="m0 0h2v8l-2 3h-5v-4l3-6z" transform="translate(1102,1273)" />
               </svg>;
      default:
        return <svg fill="#F9C744
               " height="1280" version="1.1" viewBox="0 0 2048 2048" width="1280" xmlns="http://www.w3.org/2000/svg">
                   <path d="m0 0h27l21 2 22 4 24 7 24 10 20 11 19 13 13 11 12 11 13 14 12 16 10 16 10 18 15 29 10 19 12 23 10 19 12 23 10 19 12 23 10 19 12 23 10 19 13 25 10 19 12 22 8 16 15 29 10 19 6 10 8 2 395 67 27 6 18 6 21 9 19 10 19 13 17 14 17 17 9 11 11 15 10 17 8 15 8 20 6 18 5 24 2 13 1 12v27l-2 20-5 25-6 20-9 21-11 21-8 12-8 11-13 15-4 5h-2l-2 4-38 38-1 2h-2l-2 4-38 38-7 8-40 40-5 6h-2l-2 4-34 34-1 2h-2v2h-2v2h-2l-2 4-37 37-2 3h-2l-2 4-38 38-7 8-12 12h-2l-1 3 1 16 24 164 18 124 15 102 2 16v42l-4 27-7 26-8 20-8 16-6 11-11 16-10 13-14 15-8 8-11 9-13 10-20 12-15 8-20 8-23 7-26 5-17 2h-28l-24-3-23-5-21-7-25-11-50-25-23-11-50-25-23-11-58-29-23-11-70-35-23-11-42-21h-6l-62 31-23 11-66 33-19 9-72 36-21 10-98 49-23 10-24 8-22 5-22 3h-37l-27-4-26-7-16-6-16-7-18-10-16-11-14-11-16-15-14-15-14-19-8-13-12-23-8-21-6-23-4-24-1-12v-25l4-34 12-82 10-67 11-76 18-123 6-42v-6l-7-8-12-12v-2l-4-2v-2h-2l-7-8-37-37-7-8-37-37v-2h-2l-7-8-25-25-7-8-33-33v-2h-2v-2h-2v-2h-2l-7-8-37-37-7-8-37-37v-2h-2l-7-8-11-12-14-19-9-15-8-15-8-20-6-19-5-24-2-17v-35l3-24 6-26 8-23 13-27 10-16 10-14 18-21 8-7 11-10 18-13 15-9 15-8 20-8 24-7 31-6 384-65 8-3 15-29 13-25 10-19 13-25 9-16 8-16 16-31 10-19 12-23 11-20 8-16 14-27 10-19 13-25 12-22 17-33 9-15 11-16 11-14h2l2-4 16-16 14-11 14-10 21-12 17-8 27-9 23-5zm-18 481-34 3-33 5-29 6-30 8-36 12-27 11-24 11-27 14-25 15-15 10-20 14-10 8-14 11-3 2v2l-4 2-13 12-3 2v2l-4 2-28 28-7 8-12 14-13 16-13 18-7 10-10 15-9 15-9 16-12 23-12 26-13 34-9 28-8 31-7 35-4 30-3 42v38l3 40 5 37 8 38 10 35 10 29 10 24 11 24 13 25 16 27 17 25 14 19 14 17 13 15 12 13 21 21 8 7 10 9 11 9 16 13 17 12 24 16 22 13 18 10 23 11 23 10 24 9 24 8 29 8 39 8 28 4 32 3 21 1h23l39-2 34-4 34-6 29-7 27-8 31-11 26-11 29-14 22-12 21-13 18-12 18-13 14-11 11-9 12-11 16-14v-2h2v-2l4-2 4-4v-2h2l7-8 13-14 9-11 10-12 10-13 12-17 13-20 13-22 12-23 8-16 12-28 10-27 9-30 7-28 6-32 4-31 2-25v-67l-3-32-4-29-7-34-7-27-12-36-8-21-13-29-11-22-13-23-14-22-14-20-13-17-13-16-18-20-8-8-2-3h-2l-2-4h-2l-2-4-8-7-9-9-11-9-13-11-17-13-17-12-15-10-20-12-16-9-27-14-28-12-24-9-27-9-31-8-22-5-24-4-37-4-15-1z"
                       transform="translate(1009,61)" />
                   <path d="m0 0h28l35 2 34 4 36 7 27 7 36 12 28 11 35 17 25 14 22 14 18 13 17 13 13 11 11 9 13 13 8 7 12 13 11 12 9 11 13 16 13 18 15 23 14 24 16 32 10 23 11 30 9 30 7 30 6 36 3 29 1 17v44l-2 30-4 31-7 36-10 37-10 29-11 26-8 18-10 19-12 21-7 11-16 24-13 17-13 16-11 12-7 8-26 26-8 7-14 12-15 12-18 13-26 17-26 15-28 14-28 12-38 13-30 8-34 7-37 5-26 2h-50l-37-3-38-6-31-7-34-10-19-7-27-11-33-16-23-13-19-12-20-14-13-10-14-11-11-10-8-7-6-5-17-17v-2l-3-1-7-8-12-13-22-28-13-18-11-18-10-16-15-29-10-21-11-28-11-33-8-31-6-31-4-30-2-25v-58l3-33 5-33 8-36 9-31 9-25 11-26 12-25 9-17 10-17 14-21 12-17 10-13 11-13 9-11 6-7h2l2-4 24-24 8-7 14-12 14-11 16-12 21-14 21-13 26-14 23-11 30-12 33-11 26-7 29-6 35-5 23-2zm5 127-36 2-22 3-24 5-25 7-21 8-25 12-21 13-16 12-10 9-8 7-7 7-9 11-9 12-11 18-9 19-6 16-6 25-3 28v18l3 15 5 9 8 9 11 6 9 2h173l10-3 11-7 8-11 4-12 2-15 5-8 5-4 9-4 6-1h16l11 3 6 4 5 6 4 10 2 11-1 15-4 11-5 7-9 5-9 3-8 1-84 1-13 2-10 5-9 9-6 11-2 14v122l2 13 6 11 8 8 12 6 3 1 20 1 72 1 14 2 13 5 8 6 7 9 4 9 2 10v11l-3 14-6 11-7 6-8 4-13 3h-21l-13-4-8-6-6-7-4-9-4-24-7-14-9-8-11-5-5-1h-175l-10 3-10 7-7 8-5 12-1 4v35l4 28 6 23 7 19 8 16 8 14 12 16 10 11 7 8 9 9 11 9 13 10 21 13 17 9 27 11 21 7 30 7 26 4 21 2 17 1h24l39-3 26-4 22-5 21-6 21-8 20-9 17-9 21-14 14-11 12-11 14-14v-2h2l11-14 10-15 10-18 10-25 6-22 4-25 1-12v-24l-3-25-6-25-7-20-10-21-10-16-10-13-11-12-14-14-9-7v-3l8-7 5-4v-2l4-2 18-22 8-13 8-15 8-21 5-21 3-22v-36l-3-25-5-22-6-19-8-18-8-15-8-12-10-13-11-12-8-8-11-9-14-10-16-10-14-8-25-11-31-10-27-6-28-4-24-2z" fill="#F39E22"
                       transform="translate(1008,581)" />
                   <path d="m0 0h46l31 3 24 4 24 6 20 7 20 9 20 11 15 11 13 11 15 15 10 13 10 17 8 18 5 16 5 25 1 8v39l-4 22-7 21-9 17-10 14-12 14-12 11-19 14-20 12-12 7 17 7 18 10 17 12 14 12 12 12 13 17 11 19 7 18 5 21 2 16v34l-4 26-4 15-8 20-9 17-12 17-12 14-12 12-14 11-15 10-16 9-21 10-22 8-27 7-22 4-27 3h-57l-32-4-27-6-26-8-21-9-23-12-12-8-12-9-16-15-8-8-11-14-9-14-8-16-6-16-4-16-3-19-1-13v-18l1-1h161l1 1 4 22 5 13 6 11 11 12 15 10 11 5 18 4h30l18-4 12-5 12-8 11-10 7-10 5-10 4-13 2-11v-21l-3-16-6-16-7-11-9-10-8-7-11-6-12-5-15-4-17-2-81-1-2-3v-118l2-3h72l19-1 15-3 15-6 11-7 10-10 7-11 6-16 2-9 1-9v-15l-3-17-5-13-6-11-8-10-10-7-12-6-12-3-7-1h-25l-14 3-12 5-11 7-9 8-7 11-5 12-2 9-1 9-1 1h-161l-1-1v-24l4-25 6-20 11-23 12-17 9-11 12-12 10-9 15-11 19-11 19-9 22-8 23-6 22-4 15-2z" fill="#00000"
                       transform="translate(996,748)" />
               </svg>
;
    }
  };

  if (!userData) return null;

  return (
    <div className={styles.container}>
      <h2 className={`${styles.title} ${styles[`title_${theme}`]}`}>
        {t('overview_text')}
      </h2>

      <div className={`${styles.card} ${styles[`card_${theme}`]}`}>
        {/* Top Section - Lighter Gradient */}
        <div className={styles.topSection}>
          <div className={styles.profileInfo}>
            <div className={styles.avatarContainer}>
              {userData.usersImage ? (
                <Image
                  className={styles.avatar}
                  src={userData.usersImage}
                  alt="Profile"
                  width={56}
                  height={56}
                  priority
                />
              ) : (
                <div className={styles.initials}>{getInitials(userData.usersNames)}</div>
              )}
            </div>

            <div className={styles.userDetails}>
              <div className={styles.nameRow}>
                <span className={styles.userName}>{userData.usersNames}</span>
              </div>

              <div className={styles.usernameRow}>
                <span className={styles.userHandle}>{userData.usersUsername}</span>
              </div>
            </div>

            <div className={styles.qrCode}>
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 11H11V3H3V11ZM5 5H9V9H5V5Z" fill="currentColor"/>
                <path d="M3 21H11V13H3V21ZM5 15H9V19H5V15Z" fill="currentColor"/>
                <path d="M13 11H21V3H13V11ZM15 5H19V9H15V5Z" fill="currentColor"/>
                <path d="M13 15H15V17H13V15Z" fill="currentColor"/>
                <path d="M15 17H17V19H15V17Z" fill="currentColor"/>
                <path d="M17 19H19V21H17V19Z" fill="currentColor"/>
                <path d="M17 13H19V15H17V13Z" fill="currentColor"/>
                <path d="M19 15H21V17H19V15Z" fill="currentColor"/>
                <path d="M13 19H15V21H13V19Z" fill="currentColor"/>
              </svg>
            </div>
          </div>
        </div>

        {/* Bottom Section - Darker Gradient */}
        <div className={styles.bottomSection}>
          <div className={styles.roleInfo}>
            <div className={styles.roleDetails}>
              <span className={styles.roleText}>{getRoleType(userData.usersRole?.rolesType)}</span>
            </div>

            <div className={styles.tierDetails}>
               <span className={styles.roleIcon}>
                  {getRoleIcon(userData.usersRole?.rolesType)}
               </span>
              <span className={styles.tierText}>{t('tier_text', {value: userData.usersRole?.rolesLevel || 1})}</span>
              <span className={styles.arrowIcon}>
                <svg
                  className={styles.arrow}
                  xmlns="http://www.w3.org/2000/svg"
                  width="9"
                  height="15"
                  viewBox="0 0 9 15"
                  fill="none"
                >
                  <path
                    fillRule="evenodd"
                    clipRule="evenodd"
                    d="M8.21663 6.07858C8.49753 6.35983 8.65531 6.74108 8.65531 7.13858C8.65531 7.53608 8.49753 7.91733 8.21663 8.19858L2.56063 13.8566C2.27923 14.1378 1.89763 14.2958 1.49977 14.2957C1.10192 14.2956 0.72039 14.1375 0.439127 13.8561C0.157865 13.5747 -9.37265e-05 13.1931 4.17234e-08 12.7952C9.38099e-05 12.3974 0.158233 12.0158 0.439627 11.7346L5.03563 7.13858L0.439627 2.54258C0.166254 2.25981 0.0148813 1.88098 0.0181122 1.48768C0.0213432 1.09438 0.178919 0.718084 0.456901 0.43984C0.734883 0.161595 1.11103 0.00366479 1.50432 6.29798e-05C1.89762 -0.00353884 2.2766 0.147477 2.55963 0.420583L8.21763 6.07758L8.21663 6.07858Z"
                    fill="currentColor"
                  />
                </svg>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}